---
export interface Props extends headProps {
    className?: string;
}

import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import Head, { Props as headProps } from "../components/Head.astro";
import CmdHeader from "../components/CmdHeader.astro";
import { site } from "../data/site";

const { className = "container", ...head } = Astro.props;

const createCppStyleTitle = (title: string) => {
    const titleParts = title.split("::");
    if (titleParts.length > 1) {
        var _ = titleParts.map((part) => part.trim()).join("::");
        const spaceIndex = _.indexOf(" ");
        if (spaceIndex > -1) {
            _ = _.substring(0, spaceIndex) + "<" + _.substring(spaceIndex + 1) + ">";
        }

        return _;
    } else {
        return title;
    }
};
---

<!DOCTYPE html>
<html lang={site.lang}>
    <head>
        <Head {...head} />
    </head>
    <body>
        <slot name="header">
            <CmdHeader title={createCppStyleTitle(head.title)} />
        </slot>
        <Navigation />
        <main class={className} id="main">
            <slot name="main"><slot /></slot>
        </main>
        <Footer />
    </body>
</html>
